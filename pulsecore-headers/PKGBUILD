# Maintainer: Chupligin Sergey (neochapay) <neochapay@gmail.com>

pkgname=pulsecore-headers
pkgdesc="A featureful, general-purpose sound server"
pkgver=15.0
pkgrel=2
arch=(any)
url="https://www.freedesktop.org/wiki/Software/PulseAudio/"
license=(GPL)
makedepends=('libpulse')
source=("https://github.com/pulseaudio/pulseaudio/archive/refs/tags/v${pkgver}.tar.gz"
    "pulsecore.pc"
    '0001-warn-to-warning.patch'
)
sha256sums=('596196c530df19c6f7998af0682f5401b84b23f9732210010eb968034c7eb477'
    'a069082f1d877a20a40e1953adee8a2c3a637cc06bdfaefbb1bfdbfe041aa26e'
    '0f5effd1a6e1088dd09972821afa4b179fd28b2d98c5c1207ca77f04cf415393')

prepare() {
    cd pulseaudio-$pkgver
    patch -p1 --input="${srcdir}/0001-warn-to-warning.patch"
}

package() {
    mkdir -p ${pkgdir}/usr/include/pulsecore/filter
    mkdir -p ${pkgdir}/usr/lib/pkgconfig/
    cd pulseaudio-$pkgver/src/pulsecore
    cp *.h ${pkgdir}/usr/include/pulsecore/
    cd filter
    cp *.h ${pkgdir}/usr/include/pulsecore/filter
    cp "${srcdir}/pulsecore.pc" ${pkgdir}/usr/lib/pkgconfig/
}
