From af405e29317feebacb6a2d114ebb1c1ba2035310 Mon Sep 17 00:00:00 2001
From: Jozef Mlich <jmlich83@gmail.com>
Date: Sun, 9 Jul 2023 12:02:07 +0000
Subject: [PATCH] Build with Qt6

---
 CMakeLists.txt     | 4 ++--
 devicelock.conf    | 2 +-
 src/CMakeLists.txt | 6 +++---
 3 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index cd8fa36..57d9d74 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -9,8 +9,8 @@ set(CMAKE_INCLUDE_CURRENT_DIR ON)
 include(FeatureSummary)
 include(GNUInstallDirs)
 
-set(QT_MIN_VERSION "5.12.0")
-find_package(Qt5 ${QT_MIN_VERSION} COMPONENTS Core DBus REQUIRED)
+set(QT_MIN_VERSION "6.0.0")
+find_package(Qt6 ${QT_MIN_VERSION} COMPONENTS Core DBus REQUIRED)
 find_package(PkgConfig REQUIRED)
 
 pkg_search_module(GLIB REQUIRED glib-2.0)
diff --git a/devicelock.conf b/devicelock.conf
index 24faa6f..ad04275 100644
--- a/devicelock.conf
+++ b/devicelock.conf
@@ -1,2 +1,2 @@
 [DeviceLock]
-pluginName=/usr/lib/qt5/plugins/devicelock/glacier-devicelock
+pluginName=/usr/lib/qt6/plugins/devicelock/glacier-devicelock
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 852aad8..ca4ec65 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -6,11 +6,11 @@ set(HEADERS devicelocking.h)
 add_executable(glacier-devicelock ${SRC})
 
 target_link_libraries(glacier-devicelock
-        Qt5::Core
-        Qt5::DBus
+        Qt6::Core
+        Qt6::DBus
         ${GLIB_LDFLAGS})
 
 target_include_directories(glacier-devicelock PRIVATE ${GLIB_INCLUDE_DIRS})
 
 install(TARGETS glacier-devicelock RUNTIME
-	DESTINATION /usr/lib/qt5/plugins/devicelock/)
+	DESTINATION /usr/lib/qt6/plugins/devicelock/)
-- 
2.40.1

