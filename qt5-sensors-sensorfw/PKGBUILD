# Maintainer: Felix Yan <felixonmars@archlinux.org>
# Contributor: Andrea Scarpino <andrea@archlinux.org>

pkgname=qt5-sensors-sensorfw
_basever=5.15.8
pkgver=5.15.8
pkgrel=1
_commit=6add85fa1a234a7e1943ba175c6fc799ccbae48e
arch=('x86_64' 'aarch64')
url='https://www.qt.io'
license=('GPL3' 'LGPL3' 'FDL' 'custom')
pkgdesc='SensorFW plugin for qt5-sensors'
depends=('sensorfw' 'qt5-sensors')
makedepends=('qt5-declarative' 'git')
optdepends=('qt5-declarative: QML bindings')
groups=('qt' 'qt5')
_pkgfqn=qtsensors
source=(git+https://invent.kde.org/qt/qt/$_pkgfqn#commit=$_commit)
sha256sums=('SKIP')

build() {
  cd qtsensors
  qmake CONFIG+=sensorfw
  cd src/plugins/sensors/sensorfw
  qmake
  make
}

package() {
  cd qtsensors/src/plugins/sensors/sensorfw
  mkdir -p $pkgdir/usr/lib/qt/plugins/sensors/
  cp ../../../../plugins/sensors/libqtsensors_sensorfw.so $pkgdir/usr/lib/qt/plugins/sensors/
}
