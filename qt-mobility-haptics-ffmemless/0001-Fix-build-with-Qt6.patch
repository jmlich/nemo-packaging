From 04392ce7d16e6477a7f98088b321a70549ad8e35 Mon Sep 17 00:00:00 2001
From: Jozef Mlich <jmlich83@gmail.com>
Date: Mon, 28 Aug 2023 16:58:22 +0000
Subject: [PATCH] Fix build with Qt6

---
 .gitignore    | 5 +++++
 ffmemless.pro | 6 +++---
 qfeedback.h   | 3 ---
 3 files changed, 8 insertions(+), 6 deletions(-)
 create mode 100644 .gitignore

diff --git a/.gitignore b/.gitignore
new file mode 100644
index 0000000..8e9aa89
--- /dev/null
+++ b/.gitignore
@@ -0,0 +1,5 @@
+.qmake.stash
+Makefile
+libqtfeedback_ffmemless.so*
+moc_*
+*.o
diff --git a/ffmemless.pro b/ffmemless.pro
index 64cf606..9c6b84e 100644
--- a/ffmemless.pro
+++ b/ffmemless.pro
@@ -21,7 +21,7 @@ plugindescription.files = ffmemless.json
 plugindescription.path = $$[QT_INSTALL_PLUGINS]/feedback/
 INSTALLS += plugindescription
 
-# also enable profile detection. libprofile-qt5 is a bit broken, work around it here.
+# also enable profile detection. libprofile-qt$${QT_MAJOR_VERSION} is a bit broken, work around it here.
 QT += dbus
-QMAKE_CXXFLAGS += -I/usr/include/profile-qt5
-LIBS += -lprofile-qt5
+QMAKE_CXXFLAGS += -I/usr/include/profile-qt$${QT_MAJOR_VERSION}
+LIBS += -lprofile-qt$${QT_MAJOR_VERSION}
diff --git a/qfeedback.h b/qfeedback.h
index 558c597..bfdc0d2 100644
--- a/qfeedback.h
+++ b/qfeedback.h
@@ -48,7 +48,6 @@
 #include <QElapsedTimer>
 #include <QTimer>
 
-QT_BEGIN_HEADER
 
 QT_USE_NAMESPACE
 #define ThemeEffect Effect
@@ -154,6 +153,4 @@ private:
 };
 
 
-QT_END_HEADER
-
 #endif
-- 
2.41.0

